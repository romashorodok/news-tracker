// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.25.0
// source: articles.sql

package storage

import (
	"context"
	"time"
)

const articles = `-- name: Articles :many
SELECT id, title, preface, content, origin, viewers_count, created_at, updated_at, published_at FROM articles LIMIT $2 OFFSET $1
`

type ArticlesParams struct {
	SqlOffset int32
	SqlLimit  int32
}

func (q *Queries) Articles(ctx context.Context, arg ArticlesParams) ([]Article, error) {
	rows, err := q.query(ctx, q.articlesStmt, articles, arg.SqlOffset, arg.SqlLimit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Article
	for rows.Next() {
		var i Article
		if err := rows.Scan(
			&i.ID,
			&i.Title,
			&i.Preface,
			&i.Content,
			&i.Origin,
			&i.ViewersCount,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.PublishedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getArticleByID = `-- name: GetArticleByID :one
SELECT id, title, preface, content, origin, viewers_count, created_at, updated_at, published_at FROM articles where id = $1
`

func (q *Queries) GetArticleByID(ctx context.Context, id int64) (Article, error) {
	row := q.queryRow(ctx, q.getArticleByIDStmt, getArticleByID, id)
	var i Article
	err := row.Scan(
		&i.ID,
		&i.Title,
		&i.Preface,
		&i.Content,
		&i.Origin,
		&i.ViewersCount,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.PublishedAt,
	)
	return i, err
}

const newArticle = `-- name: NewArticle :one

INSERT INTO articles (
    title, preface, content,
    origin, viewers_count, published_at
) VALUES (
    $1, $2, $3,
    $4, $5, $6
) RETURNING id
`

type NewArticleParams struct {
	Title        string
	Preface      string
	Content      string
	Origin       string
	ViewersCount int32
	PublishedAt  time.Time
}

// https://docs.sqlc.dev/en/stable/reference/query-annotations.html
func (q *Queries) NewArticle(ctx context.Context, arg NewArticleParams) (int64, error) {
	row := q.queryRow(ctx, q.newArticleStmt, newArticle,
		arg.Title,
		arg.Preface,
		arg.Content,
		arg.Origin,
		arg.ViewersCount,
		arg.PublishedAt,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const newArticleImage = `-- name: NewArticleImage :one
INSERT INTO article_images (
    article_id, url
) VALUES (
    $1, $2
) RETURNING id
`

type NewArticleImageParams struct {
	ArticleID int64
	Url       string
}

func (q *Queries) NewArticleImage(ctx context.Context, arg NewArticleImageParams) (int64, error) {
	row := q.queryRow(ctx, q.newArticleImageStmt, newArticleImage, arg.ArticleID, arg.Url)
	var id int64
	err := row.Scan(&id)
	return id, err
}
